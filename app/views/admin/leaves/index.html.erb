<p id="notice"><%= notice %></p>

<h1><%= pluralize(@leaves.count, "#{@n} #{@status.capitalize} leave")  %></h1>

<% @leaves.each do |leave| %>
<%= render 'admin_show_leave', leave: leave %>
<p>
  <%= link_to 'Show', admin_leave_path(leave) %> 
  <%= link_to 'Recommend/Approve', recommend_admin_leave_path(leave) %> 
  <%= link_to 'Edit', edit_admin_leave_path(leave) %> 
  <%= link_to 'Destroy', admin_leave_path(leave), method: :delete, data: { confirm: 'Are you sure?' } %>
</p>
<hr>
<% end %>
<br>
<% content_for :panel do %>
<h3>Filter</h3>
<%= form_with method: "get", local: true do |form| %>

  <div class="field">
    <%= label_tag :recommended, "Recommended" %> <%= "(yes)" if params[:recommended].to_i == 1 %>
    <%= check_box_tag :recommended %>
  </div>

  <div class="field">
    <%= label_tag :approved, "Approved" %> <%= "(yes)" if params[:approved].to_i == 1 %>
    <%= check_box_tag :approved, 1 %>
  </div>

  <div class="field">
    <h3>Employees</h3>
    <% for employee in Employee.where.not(position: 7) %>
        <%= check_box_tag "employee[]", employee.id, ("checked" if params[:employee].include? employee.id.to_s) %> <%= employee.names %><br>
    <% end %>  </div>

  <div class="actions">
    <%= form.submit "Update" %>
  </div>
<% end %>

<br>

<%= link_to 'New leave', new_leave_path %>

<% end %>
<% content_for :panel_type do %>inline<% end %>
